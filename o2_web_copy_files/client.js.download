import{_ as Wt,R as X,a as We,b as xt,u as Me,j as n,c as b,d as Ye,e as ie,i as Ke,f as _t,g as Ot,h as Qe,B as je,r as f,k as Ft,U as at,l as jt,A as Pt,m as Ut,S as st,n as Bt,o as Gt,p as $t,q as qt,s as Je,t as Pe,v as rt,w as ot,x as qe,y as Ht,E as zt,z as Vt,C as Xt,D as Yt,F as Kt,G as Qt,H as Jt,I as lt,J as Zt,K as en,L as tn,W as de,M as nn,N as an,O as sn,P as Oe,Q as ct,T as dt,V as rn,X as on,Y as ln,Z as cn,$ as dn,a0 as un,a1 as pn}from"./getScriptOrigin-03dbd343.js";function He(){return He=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},He.apply(this,arguments)}function Et(e,s){e.prototype=Object.create(s.prototype),e.prototype.constructor=e,Wt(e,s)}function mn(e,s){return e.classList?!!s&&e.classList.contains(s):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+s+" ")!==-1}function hn(e,s){e.classList?e.classList.add(s):mn(e,s)||(typeof e.className=="string"?e.className=e.className+" "+s:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+s))}function ut(e,s){return e.replace(new RegExp("(^|\\s)"+s+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function fn(e,s){e.classList?e.classList.remove(s):typeof e.className=="string"?e.className=ut(e.className,s):e.setAttribute("class",ut(e.className&&e.className.baseVal||"",s))}const pt={disabled:![]},bt=X.createContext(null);var Ct=function(s){return s.scrollTop},De="unmounted",ue="exited",pe="entering",Ee="entered",ze="exiting",J=function(e){Et(s,e);function s(t,i){var a;a=e.call(this,t,i)||this;var c=i,l=c&&!c.isMounting?t.enter:t.appear,u;return a.appearStatus=null,t.in?l?(u=ue,a.appearStatus=pe):u=Ee:t.unmountOnExit||t.mountOnEnter?u=De:u=ue,a.state={status:u},a.nextCallback=null,a}s.getDerivedStateFromProps=function(i,a){var c=i.in;return c&&a.status===De?{status:ue}:null};var o=s.prototype;return o.componentDidMount=function(){this.updateStatus(!![],this.appearStatus)},o.componentDidUpdate=function(i){var a=null;if(i!==this.props){var c=this.state.status;this.props.in?c!==pe&&c!==Ee&&(a=pe):(c===pe||c===Ee)&&(a=ze)}this.updateStatus(![],a)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var i=this.props.timeout,a,c,l;return a=c=l=i,i!=null&&typeof i!="number"&&(a=i.exit,c=i.enter,l=i.appear!==void 0?i.appear:c),{exit:a,enter:c,appear:l}},o.updateStatus=function(i,a){if(i===void 0&&(i=![]),a!==null)if(this.cancelNextCallback(),a===pe){if(this.props.unmountOnExit||this.props.mountOnEnter){var c=this.props.nodeRef?this.props.nodeRef.current:We.findDOMNode(this);c&&Ct(c)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ue&&this.setState({status:De})},o.performEnter=function(i){var a=this,c=this.props.enter,l=this.context?this.context.isMounting:i,u=this.props.nodeRef?[l]:[We.findDOMNode(this),l],p=u[0],g=u[1],C=this.getTimeouts(),k=l?C.appear:C.enter;if(!i&&!c||pt.disabled){this.safeSetState({status:Ee},function(){a.props.onEntered(p)});return}this.props.onEnter(p,g),this.safeSetState({status:pe},function(){a.props.onEntering(p,g),a.onTransitionEnd(k,function(){a.safeSetState({status:Ee},function(){a.props.onEntered(p,g)})})})},o.performExit=function(){var i=this,a=this.props.exit,c=this.getTimeouts(),l=this.props.nodeRef?void 0:We.findDOMNode(this);if(!a||pt.disabled){this.safeSetState({status:ue},function(){i.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:ze},function(){i.props.onExiting(l),i.onTransitionEnd(c.exit,function(){i.safeSetState({status:ue},function(){i.props.onExited(l)})})})},o.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(i,a){a=this.setNextCallback(a),this.setState(i,a)},o.setNextCallback=function(i){var a=this,c=!![];return this.nextCallback=function(l){c&&(c=![],a.nextCallback=null,i(l))},this.nextCallback.cancel=function(){c=![]},this.nextCallback},o.onTransitionEnd=function(i,a){this.setNextCallback(a);var c=this.props.nodeRef?this.props.nodeRef.current:We.findDOMNode(this),l=i==null&&!this.props.addEndListener;if(!c||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[c,this.nextCallback],p=u[0],g=u[1];this.props.addEndListener(p,g)}i!=null&&setTimeout(this.nextCallback,i)},o.render=function(){var i=this.state.status;if(i===De)return null;var a=this.props,c=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var l=xt(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return X.createElement(bt.Provider,{value:null},typeof c=="function"?c(i,l):X.cloneElement(X.Children.only(c),l))},s}(X.Component);J.contextType=bt,J.propTypes={};function _e(){}J.defaultProps={in:![],mountOnEnter:![],unmountOnExit:![],appear:![],enter:!![],exit:!![],onEnter:_e,onEntering:_e,onEntered:_e,onExit:_e,onExiting:_e,onExited:_e},J.UNMOUNTED=De,J.EXITED=ue,J.ENTERING=pe,J.ENTERED=Ee,J.EXITING=ze;const gn=J;var vn=function(s,o){return s&&o&&o.split(" ").forEach(function(t){return hn(s,t)})},Be=function(s,o){return s&&o&&o.split(" ").forEach(function(t){return fn(s,t)})},Ve=function(e){Et(s,e);function s(){for(var t,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,t.appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(l,u){var p=t.resolveArguments(l,u),g=p[0],C=p[1];t.removeClasses(g,"exit"),t.addClass(g,C?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(l,u)},t.onEntering=function(l,u){var p=t.resolveArguments(l,u),g=p[0],C=p[1],k=C?"appear":"enter";t.addClass(g,k,"active"),t.props.onEntering&&t.props.onEntering(l,u)},t.onEntered=function(l,u){var p=t.resolveArguments(l,u),g=p[0],C=p[1],k=C?"appear":"enter";t.removeClasses(g,k),t.addClass(g,k,"done"),t.props.onEntered&&t.props.onEntered(l,u)},t.onExit=function(l){var u=t.resolveArguments(l),p=u[0];t.removeClasses(p,"appear"),t.removeClasses(p,"enter"),t.addClass(p,"exit","base"),t.props.onExit&&t.props.onExit(l)},t.onExiting=function(l){var u=t.resolveArguments(l),p=u[0];t.addClass(p,"exit","active"),t.props.onExiting&&t.props.onExiting(l)},t.onExited=function(l){var u=t.resolveArguments(l),p=u[0];t.removeClasses(p,"exit"),t.addClass(p,"exit","done"),t.props.onExited&&t.props.onExited(l)},t.resolveArguments=function(l,u){return t.props.nodeRef?[t.props.nodeRef.current,l]:[l,u]},t.getClassNames=function(l){var u=t.props.classNames,p=typeof u=="string",g=p&&u?u+"-":"",C=p?""+g+l:u[l],k=p?C+"-active":u[l+"Active"],j=p?C+"-done":u[l+"Done"];return{baseClassName:C,activeClassName:k,doneClassName:j}},t}var o=s.prototype;return o.addClass=function(i,a,c){var l=this.getClassNames(a)[c+"ClassName"],u=this.getClassNames("enter"),p=u.doneClassName;a==="appear"&&c==="done"&&p&&(l+=" "+p),c==="active"&&i&&Ct(i),l&&(this.appliedClasses[a][c]=l,vn(i,l))},o.removeClasses=function(i,a){var c=this.appliedClasses[a],l=c.base,u=c.active,p=c.done;this.appliedClasses[a]={},l&&Be(i,l),u&&Be(i,u),p&&Be(i,p)},o.render=function(){var i=this.props;i.classNames;var a=xt(i,["classNames"]);return X.createElement(gn,He({},a,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},s}(X.Component);Ve.defaultProps={classNames:""},Ve.propTypes={};const xn=Ve,_n=()=>{const{ctaService:e}=Me();return e};function me(e,s,o){if(o!==void 0){const t=s[0].toUpperCase()+s.substring(1),i=document.getElementById("widget-chat");i==null||i.style.setProperty("--WDG-"+e+t,""+o)}}const En="_iconContainer_182zs_12",bn="_swing_182zs_29",mt={"widget-chat":"_widget-chat_182zs_1",iconContainer:En,swing:bn},Cn=({logoSrc:e,iconStyle:s,swing:o,onClick:t})=>(["bottom","top","left","right","width","height","zIndex","url"].forEach(i=>{me("icon",i,i==="url"&&e!==void 0?"url("+e+")":s==null?void 0:s[i])}),n("div",{onClick:()=>{t==null||t()},className:[mt.iconContainer,o??![]?mt.swing:""].join(" ")})),Sn="_fadeAppear_3ej01_1",yn="_fadeAppearActive_3ej01_6",Nn="_fadeEnter_3ej01_11",Tn="_fadeEnterDone_3ej01_16",kn="_fadeEnterActive_3ej01_20",wn="_fadeExit_3ej01_25",Dn="_fadeExitActive_3ej01_29",Mn="_fadeExitDone_3ej01_34",Ln="_iframeDialog_3ej01_38",An="_iframeClose_3ej01_45",V={fadeAppear:Sn,fadeAppearActive:yn,fadeEnter:Nn,fadeEnterDone:Tn,fadeEnterActive:kn,fadeExit:wn,fadeExitActive:Dn,fadeExitDone:Mn,iframeDialog:Ln,iframeClose:An},Rn=()=>{const{iframeService:e}=Me();return e},St=()=>{const{widgetService:e}=Me();return e},Ze=()=>{const{chatService:e}=Me();return e},yt=()=>{const{exposedService:e}=Me();return e},In=e=>typeof e=="object"&&e!==null&&"contentType"in e,Nt=e=>e instanceof File,Wn="_chatContainer_1ivep_20",On="_bottom_1ivep_43",Fn="_top_1ivep_46",jn="_rolled_1ivep_49",Pn="_dropdown_1ivep_55",Un="_errorMessage_1ivep_58",Bn="_badge_1ivep_61",Gn="_closeText_1ivep_77",$n="_closeDialog_1ivep_83",qn="_button_1ivep_88",Hn="_header_1ivep_96",zn="_visible_1ivep_142",Vn="_logo_1ivep_145",Xn="_text_1ivep_153",Yn="_buttonRow_1ivep_163",Kn="_chatWindow_1ivep_185",Qn="_buttonScrollDown_1ivep_188",Jn="_infoMessage_1ivep_209",Zn="_infoLine_1ivep_216",ei="_infoMessageText_1ivep_223",ti="_message_1ivep_231",ni="_messageWrapper_1ivep_239",ii="_messageAvatar_1ivep_243",ai="_messageTextWrapper_1ivep_254",si="_messageText_1ivep_254",ri="_richLinkWrapper_1ivep_272",oi="_quickReplyWrapper_1ivep_295",li="_messageMeta_1ivep_324",ci="_messageMetaFailed_1ivep_329",di="_document_1ivep_340",ui="_attachmentIcon_1ivep_345",pi="_attachmentName_1ivep_348",mi="_attachmentDownload_1ivep_351",hi="_left_1ivep_359",fi="_sameAuthor_1ivep_359",gi="_richLinkBox_1ivep_363",vi="_right_1ivep_372",xi="_attachmentThumbnail_1ivep_395",_i="_error_1ivep_58",Ei="_attachmentThumbnailDownload_1ivep_417",bi="_attachmentThumbnailPlay_1ivep_429",Ci="_uploadingSpinner_1ivep_436",Si="_chatSender_1ivep_442",yi="_dragEnter_1ivep_448",Ni="_emoticons_1ivep_451",Ti="_emoticonsButton_1ivep_463",ki="_textarea_1ivep_497",wi="_disabled_1ivep_509",Di="_desktop_1ivep_512",Mi="_flashing_1ivep_530",Li="_messagesEnd_1ivep_574",Ai="_editor_1ivep_578",Ri="_iframeDialog_1ivep_582",Ii="_iframeHeader_1ivep_591",Wi="_iframeButton_1ivep_595",r={"widget-chat":"_widget-chat_1ivep_1",chatContainer:Wn,bottom:On,top:Fn,rolled:jn,dropdown:Pn,errorMessage:Un,badge:Bn,closeText:Gn,closeDialog:$n,button:qn,header:Hn,visible:zn,logo:Vn,text:Xn,buttonRow:Yn,chatWindow:Kn,buttonScrollDown:Qn,infoMessage:Jn,infoLine:Zn,infoMessageText:ei,message:ti,messageWrapper:ni,messageAvatar:ii,messageTextWrapper:ai,messageText:si,richLinkWrapper:ri,quickReplyWrapper:oi,messageMeta:li,messageMetaFailed:ci,document:di,attachmentIcon:ui,attachmentName:pi,attachmentDownload:mi,left:hi,sameAuthor:fi,richLinkBox:gi,right:vi,attachmentThumbnail:xi,error:_i,attachmentThumbnailDownload:Ei,attachmentThumbnailPlay:bi,uploadingSpinner:Ci,chatSender:Si,dragEnter:yi,emoticons:Ni,emoticonsButton:Ti,textarea:ki,disabled:wi,desktop:Di,flashing:Mi,messagesEnd:Li,editor:Ai,iframeDialog:Ri,iframeHeader:Ii,iframeButton:Wi,"lds-ring":"_lds-ring_1ivep_1"};function Oi(e){return n("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:n("path",{d:"M4 12h16",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})}function Fi(e){return b("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[n("path",{d:"M4 6h16",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),n("path",{d:"M4 6v16",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),n("path",{d:"M20 6v16",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})]})}const ht=({failedMessage:e,index:s,onResend:o,onRemove:t})=>{const{t:i}=Ye(),a=()=>{o(e,s)},c=()=>{t(s)};return n("div",{className:ie(r.message,r.right,r.sameAuthor,r.error),children:b("div",{children:[b("div",{onClick:a,className:r.messageText,children:[Ke(e)&&n("div",{className:r.text,children:e}),Nt(e)&&n("div",{className:r.text,children:e.name}),_t(e)&&n("div",{className:r.text,children:i("client.formFailed")}),Ot(e)&&n("div",{className:r.text,children:e.content.filename})]}),b("div",{className:r.messageMetaFailed,children:[n("span",{onClick:a,children:i("client.repeatSend")}),n("span",{onClick:c,children:i("client.discardSend")})]})]})})},ji=({leftFontStyle:e,rightFontStyle:s,isRolled:o,showBadge:t,newMessageCount:i,messageList:a=[],formList:c=[],failedList:l=[],typing:u,writeDisabled:p,hasMoreMessages:g,isMessagesLoading:C,isUploadingAttachment:k,isLastMessageSame:j,onFormInteraction:P,onResend:Z,onIframeOpen:$,getInlineForm:ae,addIframeListener:D,setNewMessageCount:ee,onQuickReplyClick:se,onAttachmentOpen:W,setScrolledOnEnd:te,loadMoreMessages:Y})=>{const{t:O}=Ye(),{discardFailedMessage:M}=Ze(),w=Number(Qe(je.END_TIME)),E=f.useRef(null),K=f.useRef(null),_=f.useRef(!![]),v=f.useRef(![]),Q=f.useRef(0);f.useEffect(()=>{(!j&&v.current&&!_.current||_.current)&&I()},[j,v,_]);const he=()=>{var N;const m=E.current,x=Array.from(((N=K.current)==null?void 0:N.children)??[]).filter(q=>q.classList.contains(r.message)),S=x.length>0?x[x.length-1].clientHeight:100;return m!=null?Math.abs(m.scrollHeight-m.clientHeight-m.scrollTop)<S:![]};f.useEffect(()=>{const m=K.current;if(m==null)return()=>{};const x=new ResizeObserver(S=>{be()});return x.observe(m),()=>{x.disconnect()}},[]),f.useEffect(()=>{var x;const m=()=>{const S=E.current;S!==null&&S.scrollTop===0&&g===!![]&&(S.scrollTop=1),S!==null&&S.scrollTop<=S.scrollHeight/10&&(Y==null||Y())};return(x=E.current)==null||x.addEventListener("scroll",m),()=>{var S;return(S=E.current)==null?void 0:S.removeEventListener("scroll",m)}},[g]),f.useEffect(()=>{var x;const m=Ft(()=>{_.current=he(),te(_.current),_.current&&!o&&ee(0)});return _.current&&!o&&ee(0),(x=E.current)==null||x.addEventListener("scroll",m),()=>{var S;return(S=E.current)==null?void 0:S.removeEventListener("scroll",m)}},[o]),f.useLayoutEffect(()=>{if(a.length>0){const m=a[a.length-1];v.current=m.type==="Message"&&m.from.type==="Client",Q.current=Ce()}te(he())},[a]),f.useLayoutEffect(()=>{v.current=![]},[u]),f.useEffect(()=>{I()},[l]);const I=()=>{var m;((m=E.current)==null?void 0:m.scrollTop)!=null&&(E.current.scrollTop=E.current.scrollHeight)},be=()=>{(v.current&&!_.current||_.current)&&I()},Ce=()=>a.reduce((m,x)=>x.from.nickname==="system"&&x.type==="Message"&&x.text!=null&&x.utcTime>m?x.utcTime:m,0);return n("div",{ref:E,className:r.chatWindow,children:b("div",{ref:K,children:[C===!![]&&n(at,{justify:"center"}),jt(a).map((m,x,S)=>{var Re,ve,ke,Ie,we;if(m.type==="FailedAttachment"&&m.messageObject!==void 0)return n(ht,{index:x,failedMessage:m.messageObject,onResend:Z,onRemove:M},x);let N=m.from.type==="Client";const q=m.type==="ParticipantJoined"&&!N,L=m.type==="ParticipantLeft"&&!N,A=N,re=((Re=S[x+1])==null?void 0:Re.from.nickname)===m.from.nickname&&((ve=S[x+1])==null?void 0:ve.type)===m.type,Se=m.from.nickname==="system"||!["Message","TypingStarted","TypingStopped"].includes(m.type),H=m.utcTime;let F=m.text,U=![],oe=![],fe,ne,ye,le,Ne=[],B=null;if(Se)return q||L?b("div",{className:r.infoMessage,children:[n("div",{className:r.infoLine}),n("div",{className:r.infoMessageText,children:O(q?"client.agentConnected":"client.agentDisconnected")})]},H+"_"+m.index):b("div",{className:r.infoMessage,children:[n("div",{className:r.infoLine}),n("div",{className:r.infoMessageText,children:typeof F=="string"?F:m.type})]},H+"_"+m.index);if(m.text==null||!["Message","Structured"].includes(m.type))return null;let h;if(typeof m.text=="object"){if(h=m.text,h.forceAgent===!![]&&(N=![]),h.isVisible===![])return![];if((h.contentType==="text"||h.contentType==="formattedText"||h.contentType==="formSubmit")&&(F=h.content.text),h.contentType==="quick-replies"&&(Ne=h.content,F=h.text),h.contentType==="rich-links"&&(B=h.content,oe=!![]),h.contentType==="kvps"&&h.content.kvps!==void 0){const T=h.content.kvps;F=Object.keys(T).map(ce=>ce+": "+String(T[ce])).join(`
`)}if(h.contentType==="iframe")return(h.content.isLoginFrame??![])&&h.content.src!=null&&(D==null||D(h.content.src)),b("div",{className:r.iframeDialog,children:[n("div",{className:r.iframeHeader,children:(ke=h.content.introDialog)==null?void 0:ke.header}),n("div",{className:r.iframeContent,children:(Ie=h.content.introDialog)==null?void 0:Ie.text}),n("div",{className:r.iframeButton,onClick:()=>h.contentType==="iframe"?$==null?void 0:$(h):null,children:(we=h.content.introDialog)==null?void 0:we.buttonText})]},H+"_"+m.index);if(h.contentType==="adaptiveCard"&&h.content.adaptiveCardName!==void 0&&ae!=null){const{adaptiveCardName:T,kvps:z}=h.content,ce=Number.isNaN(w)?!![]:w<H;return n(Pt,{disabled:!ce,formName:T,kvps:z??{},onExecuteAction:xe=>P==null?void 0:P(xe,T)},H+"_"+m.index)}h.contentType==="attachment"&&(U=!![],fe=h.content.attachmentURL,ye=h.content.filename,le=h.content.attachmentType,h.content.thumbnailURL!==void 0&&(ne=h.content.thumbnailURL))}const Te=new Date(H),ge=("0"+Te.getMinutes()).slice(-2),Le=("0"+Te.getSeconds()).slice(-2),Ae=Te.getHours()+":"+ge+":"+Le;return typeof F!="string"&&!U&&!oe?null:b("div",{className:r.message,children:[b("div",{className:ie(r.message,A?r.right:r.left,r.messageWrapper,{[r.sameAuthor]:re}),style:A?s:e,children:[!A&&!re&&n("div",{className:r.messageAvatar}),b("div",{className:ie(r.messageTextWrapper,{[r.richLinkBox]:oe&&(B==null?void 0:B.richLinkData)!=null}),children:[typeof F=="string"&&!U&&!oe&&n("div",{className:r.messageText,children:n("div",{className:r.text,dangerouslySetInnerHTML:{__html:F}})}),oe&&(B==null?void 0:B.richLinkData)!=null&&n("div",{className:r.messageText,children:B.richLinkData.map((T,z)=>T.data===null?null:T.type==="text"?n("div",{className:r.text,dangerouslySetInnerHTML:{__html:T.data}},z):n("div",{className:r.text,children:n(Ut,{content:T.data,isAgent:!N})},z))}),ne!==void 0&&b("div",{className:r.attachmentThumbnail,children:[n("img",{onClick:()=>{h.contentType==="attachment"&&(W==null||W(h))},src:ne,alt:ye}),n("a",{href:fe,className:r.attachmentThumbnailDownload,target:"_blank",download:!![],rel:"noreferrer",children:n(st,{fill:"#FFF",opacity:.7})}),le==="video"&&n("div",{className:r.attachmentThumbnailPlay,onClick:()=>{h.contentType==="attachment"&&(W==null||W(h))},children:n(Bt,{fill:"#FFF",opacity:.7})})]}),U&&ne===void 0&&fe!==void 0&&b("div",{className:[r.messageText,r.document].join(" "),children:[n(Gt,{className:r.attachmentIcon,fill:A?s==null?void 0:s.color:e==null?void 0:e.color,opacity:.7}),n("div",{className:r.attachmentName,children:ye??"noname"}),n("div",{className:r.attachmentDownload,children:n("a",{href:fe,target:"_blank",download:!![],rel:"noreferrer",children:n(st,{fill:A?s==null?void 0:s.color:e==null?void 0:e.color,opacity:.7})})})]}),!re&&n("div",{className:r.messageMeta,children:A?Ae:m.from.nickname+", "+Ae})]})]}),!A&&Ne.length>0&&n("div",{className:r.quickReplyWrapper,children:Ne.map((T,z)=>n("button",{type:"button",disabled:H<Q.current||p,onClick:()=>{se(T.text)},children:T.label!==""?T.label:T.text},z))})]},H+"_"+m.index)}),l.map((m,x)=>n(ht,{index:x,failedMessage:m,onResend:Z,onRemove:M},x)),k===!![]&&n(at,{justify:"end"}),!_.current&&b("div",{onClick:I,className:r.buttonScrollDown,children:[n($t,{}),t&&n("div",{className:r.badge,children:i})]}),n("div",{className:r.messagesEnd,children:(u??![])&&n("div",{className:r.flashing})})]})})};let Fe=document.title,Ge=0;const ft=qt.t("client.newMessage"),Pi=({newMessageCount:e})=>(Ge=e,f.useEffect(()=>{const s=setInterval(()=>{const o=document.title.includes(ft);!o&&Fe!==document.title&&(Fe=document.title),Ge>0?o?document.title=Fe:document.title="("+Ge+") "+ft:o&&(document.title=Fe)},3e3);return()=>{clearInterval(s)}},[]),null),Ui=({logoSrc:e,chatStyle:s,headerStyle:o,messageLeftStyle:t,messageRightStyle:i,uploadSpinner:a,inputStyle:c,headerText:l,open:u,enterVariant:p,messageList:g=[],formList:C=[],richLink:k,failedList:j=[],errorMessage:P,typing:Z,form:$,hostConfig:ae,writeDisabled:D,sessionActive:ee,hasMoreMessages:se,isMessagesLoading:W,isUploadingAttachment:te,disconnected:Y,onFormInteraction:O,onSend:M,onSendMessageText:w,onSendAttachment:E,onSendForm:K,onStartTyping:_,onRollClick:v,onIframeOpen:Q,onAttachmentOpen:he,onCloseClick:I,onErrorClick:be,getInlineForm:Ce,addIframeListener:m,loadMoreMessages:x,resetRichLink:S})=>{const{t:N}=Ye(),{resend:q}=Ze(),[L,A]=f.useState(!u),[re,Se]=f.useState(![]),[H,F]=f.useState(![]),[U,oe]=f.useState(""),[fe,ne]=f.useState(![]);X.useEffect(()=>{!Pe()&&A(!u)},[u]);const ye=Qe(je.DEVICE_TYPE)==="desktop",le=f.useRef(null),Ne=f.useRef(null),B=(s==null?void 0:s.bottom)===void 0||String(s.bottom).match(/^0/)!==null;["bottom","top","left","right","width","height","zIndex","url"].forEach(d=>{me("widget",d,d==="url"&&e!==void 0?"url("+e+")":s==null?void 0:s[d])}),["border-color"].forEach(d=>{me("attachmentSpinner",d,a.color)});const h={fontSize:t==null?void 0:t.fontSize,color:t==null?void 0:t.color},Te={fontSize:i==null?void 0:i.fontSize,color:i==null?void 0:i.color};["header","messageLeft","messageRight"].forEach(d=>{["color","backgroundColor"].forEach(y=>{let R;switch(d){case"header":R=o;break;case"messageLeft":R=t;break;default:R=i}me(d,y,R==null?void 0:R[y])})}),me("input","height",c==null?void 0:c.height);let ge=![];const[Le,Ae]=f.useState(![]),Re=rt(g).length,ve=ot(Re),ke=g.length>0?g[g.length-1].index:0,Ie=ot(ke),we=Ie===ke,[T,z]=f.useState(0);f.useEffect(()=>{(!Le||L)&&ve!=null&&ve>=0&&!we&&z(T+rt(g).length-ve)},[g,j]),f.useEffect(()=>{const d=setTimeout(()=>{var y;(y=le.current)==null||y.focus()},1);return()=>{clearTimeout(d)}},[]);const ce=()=>(!Le||L)&&T>0&&ee===!![],xe=(d,y)=>{!(y??![])&&et(d),oe(d)},kt=d=>{p==="alt+enter"&&d.key==="Enter"&&(d.preventDefault(),ge?xe(U+`
`):Ue()),p==="enter"&&d.key==="Enter"&&ge&&(d.preventDefault(),Ue()),d.key==="Alt"&&(d.preventDefault(),ge=!![])},wt=d=>{d.key==="Alt"&&(d.preventDefault(),ge=![])},Ue=()=>{var d;(D??![])||(U.length>0&&(M(U),xe("",!![]),Se(![])),(d=le.current)==null||d.focus())},Dt=(d,y)=>{Ke(d)?(M(d),q(y)):Nt(d)?(E(d),q(y,!![])):_t(d)?K(d.data):In(d)?w(d):q(y)},et=d=>{_!=null&&_(d)},Mt=d=>{if(D??![])return;const{emoji:y}=d,R=""+U+y;xe(R),et(R)},tt=f.useRef(null),Lt=d=>{(D??![])||d.target.files!=null&&E(d.target.files[0])},At=d=>{const{items:y}=d.clipboardData;for(let R=0;R<y.length;R+=1)if(y[R].type.includes("image")){const it=y[R].getAsFile();it!=null&&E(it);break}},Rt=d=>{d.preventDefault(),d.stopPropagation();const{files:y}=d.dataTransfer;y.length===1&&E(y[0]),ne(![])};function nt(d){d.preventDefault(),ne(!![])}function It(){ne(![])}return b("div",{ref:Ne,onDrop:Rt,onDragEnter:nt,onDragLeave:It,onDragOver:nt,onClick:()=>{L&&(A(!L),v==null||v())},className:ie(r.chatContainer,L?r.rolled:r.closed,B?r.bottom:r.top),children:[n(Pi,{newMessageCount:T}),b("div",{className:ie(r.header,B?r.bottom:r.top),children:[ce()&&L&&n("div",{className:r.badge,children:T}),n("div",{className:r.logo}),n("div",{onClick:()=>{A(!L),v==null||v()},className:r.text,children:l}),b("div",{className:r.buttonRow,children:[L?n(Fi,{onClick:()=>{A(!L),v==null||v()}}):n(Oi,{onClick:()=>{A(!L),v==null||v()}}),n(qe,{onClick:()=>{(Y??![])&&(I==null||I()),L&&A(![]),!Pe()&&F(!![])}})]}),n("div",{onClick:be,className:ie(r.errorMessage,{[r.visible]:P!=null&&P.length>0}),children:P})]}),H&&b("div",{className:r.closeText,children:[N("client.closeDialog"),b("div",{className:r.closeDialog,children:[n("div",{className:r.button,onClick:()=>{I==null||I(),F(![])},children:N("client.close")}),n("div",{className:r.button,onClick:()=>{F(![])},children:N("client.cancel")})]})]}),$!=null?n("div",{className:r.dropdown,children:n(f.Suspense,{fallback:n("div",{children:N("client.loading")}),children:n(Ht.AdaptiveCard,{payload:$,hostConfig:ae,onExecuteAction:d=>O==null?void 0:O(d)})})}):b("div",{className:r.dropdown,children:[n(ji,{leftFontStyle:h,rightFontStyle:Te,showBadge:ce(),newMessageCount:T,onResend:Dt,onIframeOpen:Q,onAttachmentOpen:he,isRolled:L,setScrolledOnEnd:Ae,messageList:g,formList:C,failedList:j,isLastMessageSame:we,typing:Z,writeDisabled:D,hasMoreMessages:se,isMessagesLoading:W,isUploadingAttachment:te,setNewMessageCount:z,onFormInteraction:O,getInlineForm:Ce,addIframeListener:m,loadMoreMessages:x,onQuickReplyClick:d=>{M(d)}}),b("div",{className:ie(r.chatSender,{[r.dragEnter]:fe}),children:[re&&b("div",{className:r.emoticons,children:[n("div",{className:r.emoticonsButton,children:n(qe,{onClick:()=>{Se(![])}})}),n(zt,{previewConfig:{showPreview:![],defaultCaption:N("emoji.mood")??""},categories:Vt(N),searchPlaceHolder:N("emoji.search")??"Search",height:"400px",emojiVersion:"3.0",width:"auto",onEmojiClick:Mt})]}),k!=null&&U.includes(k.regexUrl)&&S!=null&&n(Xt,{content:k,handleClosePreview:S}),b("div",{className:ie(r.textarea,{[r.disabled]:D??![],[r.desktop]:ye}),children:[n("textarea",{ref:le,maxLength:99999,onKeyDown:kt,onKeyUp:wt,disabled:D,onChange:d=>{const y=d.target.value;xe(y)},onPaste:At,value:U,placeholder:N("client.inputPlaceholder")??void 0}),n("input",{type:"file",ref:tt,onChange:Lt,style:{display:"none"}}),n("div",{className:r.button,onClick:()=>{var d;(D??![])||(d=tt.current)==null||d.click()},children:n(Yt,{})}),n("div",{className:r.button,onClick:()=>{var d;(D??![])||(re&&((d=le.current)==null||d.focus()),Se(!re))},children:n(Kt,{})}),n("div",{className:r.button,onClick:Ue,children:n(Qt,{})})]})]})]})]})},Bi=Je(Ui),Gi=({headerText:e,...s})=>{const o=Ze(),t=yt(),i=Jt(),a=Rn(),{rollWidget:c,closeWidget:l}=St(),{addIframeListener:u}=a,{messageList:p,errorList:g,failedList:C,typing:k,writeDisabled:j,isUploadingAttachment:P,clearErrorList:Z,sessionActive:$}=o,[ae,D]=f.useState(i.activeForm);f.useEffect(()=>{i.getAllForms()},[]),f.useEffect(()=>{D(i.activeForm)},[i.activeForm]);const{headerTextContext:ee}=t,se=_=>{var Q;const v=lt(_);if(!(v===void 0||v.length===0)){if(o.richLink!=null&&o.richLink.regexUrl===((Q=Zt(_))==null?void 0:Q[0])){o.sendRichLink("me",v);return}o.sendMessage("me",v)}},W=_=>{o.sendMessageText("me",_)},te=_=>{o.sendAttachment("me",_)},Y=_=>{o.updateUserData(_,!![])},O=_=>{const v=lt(_);v!=null&&v.length>=0&&o.startTyping(v)},M=()=>{l()},w=()=>{o.loadMoreMessages()};let E=![];const K=()=>{E||(E=!![],setTimeout(()=>{c(),E=![]},10))};return n(Bi,{disconnected:Pe(),writeDisabled:j||Pe(),sessionActive:$,isUploadingAttachment:P,form:ae,formList:i.formList,hostConfig:i.hostConfig,onFormInteraction:(_,v)=>{i.processFormInteraction(_,v??i.activeFormName),D(void 0)},getInlineForm:i.getInlineForm,messageList:p,errorMessage:g.join(", "),failedList:C.filter(Ke),...s,hasMoreMessages:o.cursor!==null,isMessagesLoading:o.loading,onSend:se,onSendMessageText:W,onSendAttachment:te,onSendForm:Y,onStartTyping:O,typing:k,richLink:o.richLink,resetRichLink:o.resetRichLink,onErrorClick:Z,headerText:ee||e,onRollClick:K,onCloseClick:M,addIframeListener:u,loadMoreMessages:w})},$i=Je(Gi);function gt(){const{innerWidth:e,innerHeight:s}=window;return{width:e,height:s}}function Tt(){const[e,s]=f.useState(gt());return f.useEffect(()=>{function o(){s(gt())}return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[]),e}const qi="_bubble_1s4qn_1",Hi="_iframe_1s4qn_29",zi="_isLarge_1s4qn_38",Vi="_isSmall_1s4qn_42",Xi="_rectangle_1s4qn_47",Yi="_textWrapper_1s4qn_62",Ki="_header_1s4qn_69",Qi="_picture_1s4qn_74",Ji="_description_1s4qn_81",G={bubble:qi,iframe:Hi,isLarge:zi,isSmall:Vi,rectangle:Xi,textWrapper:Yi,header:Ki,picture:Qi,description:Ji},Zi=({ctaStyle:e,ctaPosition:s,onClick:o,content:t,ctaConfig:i})=>{const{width:a}=Tt();["offsetX","offsetY","url"].forEach(p=>{me("ctaPosition",p,s==null?void 0:s[p])}),["backgroundColor","color"].forEach(p=>{me("ctaStyle",p,e==null?void 0:e[p])});const c=p=>{if(p==="bubble")return"bubble";if(p==="rectangle")return"rectangle";if(p==="iframe")return"iframe"},l=a<i.breakpoint,u=c(i.ctaType);return u==="iframe"?n("iframe",{title:i.ctaType,className:[G.iframe,l?G.isSmall:G.isLarge].join(" "),src:i.content.iframe.url}):n("div",{onClick:o,className:[u?G[u]:null].join(" "),children:t.pictureWithText.header!==""&&t.pictureWithText.description!==""&&t.pictureWithText.url!==""?b("div",{className:G.textWrapper,children:[n("div",{className:G.header,children:t.pictureWithText.header}),n("div",{className:G.picture,children:n("img",{src:t.pictureWithText.url,alt:"Moje O2"})}),n("div",{className:G.description,children:t.pictureWithText.description})]}):b("div",{className:G.textWrapper,children:[n("div",{className:G.header,children:t.text.header}),n("div",{className:G.description,children:t.text.description})]})})};function ea(){const{width:e}=Tt(),s=yt(),[o,t]=f.useState(![]),[i,a]=f.useState(![]),[c,l]=f.useState(),[u,p]=f.useState(),g=X.useRef(null),{widgetState:C,openWidget:k,storeBrowserData:j}=St(),{ctaState:P,closeCta:Z}=_n(),[$,ae]=f.useState(),[D,ee]=f.useState(),[se,W]=f.useState();f.useEffect(()=>{(async()=>{if(!i){a(!![]);try{Oe.postMessage("EventWidgetStarted"),Oe.postEventWidgetState(ct.isFirstMessageSent());const S=await dt.initiate();await s.addCustomData("WDG_SESSION_ID",S.sessionId,![]);const N=await dt.getConfig();ae(N.widget.configuration),ee(N.icon.configuration),W(N.cta.configuration);const q={[je.TIME_IN_CONTEXT]:"0",[je.START_TIME]:new Date().getTime().toString()};j(q),Oe.postMessage("EventWidgetInitialized"),Oe.postEventWidgetState(ct.isFirstMessageSent()),t(!![]),a(![])}catch(S){rn(S),a(![])}}})()},[]);const te=()=>{p(void 0)};if(C===de.Init)return null;const Y=C===de.Open||C===de.Rolled||C===de.Closed,O=C===de.IconSwing;if(!o)return null;const M=D,w=$,E=se,K=e<M.breakpoint?M.mobileLogo.src:M.logo.src,_=e<M.breakpoint?M.mobileStyle:M.style,v=w.logo.src,Q=e<w.breakpoint?w.mobileStyle:w.style,he=e<E.breakpoint?E.mobileStyle:E.style,I={backgroundColor:E.backgroundColor,color:E.color},be=E.content,Ce=w.message.left.style,m=w.message.right.style;return b(nn,{children:[n(xn,{nodeRef:g,in:Y,appear:!![],timeout:400,unmountOnExit:!![],mountOnEnter:!![],classNames:{appear:V.fadeAppear,appearActive:V.fadeAppearActive,enter:V.fadeEnter,enterActive:V.fadeEnterActive,enterDone:V.fadeEnterDone,exit:V.fadeExit,exitActive:V.fadeExitActive,exitDone:V.fadeExitDone},children:n("div",{ref:g,children:n($i,{onIframeOpen:l,onAttachmentOpen:p,logoSrc:v,chatStyle:Q,headerStyle:w.header.style,messageLeftStyle:Ce,messageRightStyle:m,uploadSpinner:w.uploadSpinner,inputStyle:w.input.style,onSend:()=>{},onSendMessageText:()=>{},onSendAttachment:()=>{},onSendForm:()=>{},open:C===de.Open,headerText:w.header.text,enterVariant:w.key.enter})})}),(C===de.Icon||O)&&n(Cn,{logoSrc:K,iconStyle:_,onClick:()=>void k(),swing:O}),P===an.Open&&n(Zi,{ctaStyle:I,content:be,ctaPosition:he,onClick:Z,ctaConfig:E}),c!=null&&b("div",{className:V.iframeDialog,children:[n("div",{className:V.iframeClose,children:n(qe,{onClick:()=>{l(void 0)}})}),n("iframe",{title:c.content.src,src:c.content.src,width:c.content.width,height:c.content.height,sandbox:c.content.sandbox})]}),n(sn,{attachment:u,closeOverlay:te})]})}const ta=Je(ea);function na(){return n(en,{children:n(tn,{children:n(ta,{})})})}var vt;window.WIDGET_VERSION="1.3.4",[["PARTICIPANTS","WDG_PARTICIPANTS"],["SESSION_ID","WDG_SESSION_ID"],["WIDGET-ROLLED","WDG_ROLLED"],["WIDGET-SECURE-KEY","WDG_SECURE_KEY"],["WIDGET-STATE","WDG_STATE"]].forEach(([e,s])=>{const o=Qe(e);o!=null&&on(s,o),ln(e)}),cn({dsn:((vt=window.widgetConfig)==null?void 0:vt.OWIDGET_SENTRY_DSN)??"https://8b6a36b5fcbb48d0a12afc72b4eae778@sentry.eman.dev/48",integrations:e=>[...e.filter(o=>o.name!=="TryCatch"),new dn({tracePropagationTargets:[]})],environment:"production",defaultIntegrations:![],tracesSampleRate:.01,sampleRate:.1,initialScope:{tags:{app:"client"}}});const Xe=document.createElement("div");Xe.id="widget-chat";const ia=un(),$e=document.createElement("link");$e.rel="stylesheet",$e.href=ia+"/assets/style.css",document.head.appendChild($e),document.body.appendChild(Xe),pn.createRoot(Xe).render(n(X.StrictMode,{children:n(na,{})}));
